(this.webpackJsonpsocnet=this.webpackJsonpsocnet||[]).push([[0],{112:function(e,t,a){e.exports={message:"Message_message__414Xv"}},116:function(e,t,a){e.exports=a.p+"static/media/Spinner-1s-200px.38058ab0.svg"},117:function(e,t,a){e.exports={postsBlock:"MyPosts_postsBlock__1qSj7"}},12:function(e,t,a){e.exports={nav:"Navbar_nav__2G52t",item:"Navbar_item__Yr9KI",active:"Navbar_active__3YByj"}},120:function(e,t,a){e.exports=a(247)},122:function(e,t,a){},126:function(e,t,a){},247:function(e,t,a){"use strict";a.r(t);var n=a(0),r=a.n(n);a(122),Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));var o=a(50),s=a.n(o),l=(a(126),a(12)),i=a.n(l),c=a(9),u=function(){return r.a.createElement("nav",{className:i.a.nav},r.a.createElement("div",{className:i.a.item},r.a.createElement(c.b,{to:"/profile",activeClassName:i.a.active},"Profile")),r.a.createElement("div",{className:i.a.item},r.a.createElement(c.b,{to:"/dialogs",activeClassName:i.a.active},"Messages")),r.a.createElement("div",{className:i.a.item},r.a.createElement(c.b,{to:"/users",activeClassName:i.a.active},"Users")),r.a.createElement("div",{className:i.a.item},r.a.createElement(c.b,{to:"/news",activeClassName:i.a.active},"News")),r.a.createElement("div",{className:i.a.item},r.a.createElement(c.b,{to:"/music",activeClassName:i.a.active},"Music")),r.a.createElement("div",{className:i.a.item},r.a.createElement(c.b,{to:"/setting",activeClassName:i.a.active},"Setting")))},m=a(7),d=function(){return r.a.createElement("div",null,"Setting")},p=function(){return r.a.createElement("div",null,"News")},f=function(){return r.a.createElement("div",null,"Music")},g=a(53),E=a.n(g),v=a(74),h=a.n(v),b=function(e){var t="/dialogs/"+e.id;return r.a.createElement("div",{className:h.a.dialog},r.a.createElement(c.b,{to:t,activeClassName:h.a.active},e.name))},O=a(112),_=a.n(O),j=function(e){return r.a.createElement("div",{className:_.a.message},e.message)},P=a(249),S=a(248),w=Object(S.a)({form:"dialogAddMessageForm"})((function(e){return r.a.createElement("form",{onSubmit:e.handleSubmit},r.a.createElement("div",null,r.a.createElement(P.a,{component:"textarea",name:"newMassageBody",placeholder:"Enter your message"})),r.a.createElement("div",null,r.a.createElement("button",null,"Send")))})),C=function(e){var t=e.dialogsPage,a=t.dialogs.map((function(e){return r.a.createElement(b,{id:e.id,name:e.name,key:e.id})})),n=t.messages.map((function(e){return r.a.createElement(j,{id:e.id,message:e.message,key:e.id})}));return r.a.createElement("div",{className:E.a.dialogs},r.a.createElement("div",{className:E.a.dialogsItems},a),r.a.createElement("div",{className:E.a.messages},r.a.createElement("div",null," ",n),r.a.createElement(w,{onSubmit:function(t){e.sendMessage(t.newMassageBody)}})))},N=a(29),y=a(4),T=a(250),k={dialogs:[{id:Object(T.a)(),name:"Kleo"},{id:Object(T.a)(),name:"Hiperion"},{id:Object(T.a)(),name:"Susan"},{id:Object(T.a)(),name:"Gektar"},{id:Object(T.a)(),name:"Chuck"}],messages:[{id:Object(T.a)(),message:"Hey"},{id:Object(T.a)(),message:"Yo man"},{id:Object(T.a)(),message:"hu you piople?"}]},I=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:k,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"SEND-MESSAGE":var a=t.newMassageBody;return Object(y.a)(Object(y.a)({},e),{},{messages:[].concat(Object(N.a)(e.messages),[{id:Object(T.a)(),message:a}])});default:return e}},F=a(8),A=a(6),U=a(35),M=function(e){return{isAuth:e.auth.isAuth}};function L(e){return Object(F.b)(M)((function(t){t.isAuth;var a=Object(U.a)(t,["isAuth"]);return t.isAuth?r.a.createElement(e,a):r.a.createElement(m.a,{to:"/login"})}))}var x=Object(A.d)(Object(F.b)((function(e){return{dialogsPage:e.dialogsPage}}),(function(e){return{sendMessage:function(t){e(function(e){return{type:"SEND-MESSAGE",newMassageBody:e}}(t))}}})),L)(C),G=a(115),D=a.n(G).a.create({withCredentials:!0,baseURL:"https://social-network.samuraijs.com/api/1.0/",headers:{"API-KEY":"d53ad02d-1ee2-4ffc-9e75-df6b59b01ee8"}}),R=function(e,t){return D.get("users?page=".concat(e,"&count=").concat(t)).then((function(e){return e.data}))},B=function(e){return D.post("follow/".concat(e)).then((function(e){return e.data}))},H=function(e){return D.delete("follow/".concat(e)).then((function(e){return e.data}))},W=function(e){return console.warn("Obsolete method. Please profileAPI object."),z.getProfile(e)},z={getProfile:function(e){return D.get("profile/".concat(e)).then((function(e){return e.data}))},getStatus:function(e){return D.get("profile/status/"+e).then((function(e){return e.data}))},updateStatus:function(e){return D.put("profile/status/",{status:e}).then((function(e){return e.data}))}},Y=function(){return D.get("auth/me").then((function(e){return e.data}))},X=function(e,t){var a=arguments.length>2&&void 0!==arguments[2]&&arguments[2];return D.post("auth/login",{email:e,password:t,rememberMe:a})},q=function(){return D.delete("auth/login")},J={users:[],pageSize:5,totalUsersCount:0,currentPage:1,isFetching:!0,followingInProgress:[]},K=function(e){return{type:"FOLLOW",userId:e}},Q=function(e){return{type:"UNFOLLOW",userId:e}},$=function(e){return{type:"TOGGLE_IS_FETCHING",isFetching:e}},V=function(e,t){return{type:"TOGGLE_IS_FOLLOWING_PROGRESS",isFetching:e,userId:t}},Z=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:J,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"FOLLOW":return Object(y.a)(Object(y.a)({},e),{},{users:e.users.map((function(e){return e.id===t.userId?Object(y.a)(Object(y.a)({},e),{},{followed:!0}):e}))});case"UNFOLLOW":return Object(y.a)(Object(y.a)({},e),{},{users:e.users.map((function(e){return e.id===t.userId?Object(y.a)(Object(y.a)({},e),{},{followed:!1}):e}))});case"SET_USERS":return Object(y.a)(Object(y.a)({},e),{},{users:Object(N.a)(t.users)});case"SET_CURRENT_PAGE":return Object(y.a)(Object(y.a)({},e),{},{currentPage:t.currentPage});case"SET_TOTAL_USER_COUNT":return Object(y.a)(Object(y.a)({},e),{},{totalUsersCount:t.totalUsersCount});case"TOGGLE_IS_FETCHING":return Object(y.a)(Object(y.a)({},e),{},{isFetching:t.isFetching});case"TOGGLE_IS_FOLLOWING_PROGRESS":return Object(y.a)(Object(y.a)({},e),{},{followingInProgress:t.isFetching?[].concat(Object(N.a)(e.followingInProgress),[t.userId]):e.followingInProgress.filter((function(e){return e!==t.userId}))});default:return e}},ee=a(22),te=a(23),ae=a(25),ne=a(24),re=a(78),oe=a.n(re),se=a(52),le=a.n(se),ie=function(e){for(var t=Math.ceil(e.totalUsersCount/e.pageSize),a=[],n=1;n<=t;n++)a.push(n);return r.a.createElement("div",null,r.a.createElement("div",null,a.map((function(t){return r.a.createElement("span",{className:e.currentPage===t?oe.a.selectedPage:"",onClick:function(a){return e.onPageChanged(t)}}," ",t)}))),e.users.map((function(t){return r.a.createElement("div",{key:t.id},r.a.createElement("span",null,r.a.createElement("div",null,r.a.createElement(c.b,{to:"/profile/"+t.id},r.a.createElement("img",{src:null!==t.photos.small?t.photos.small:le.a,className:oe.a.userPhoto,alt:"\u0430\u0432\u0430\u0442\u0430\u0440"}))),r.a.createElement("div",null,t.followed?r.a.createElement("button",{disabled:e.followingInProgress.some((function(e){return e===t.id})),onClick:function(){e.unFollow(t.id)}},"UnFollow"):r.a.createElement("button",{disabled:e.followingInProgress.some((function(e){return e===t.id})),onClick:function(){e.follow(t.id)}},"Follow"))),r.a.createElement("span",null,r.a.createElement("span",null,r.a.createElement("div",null,t.name),r.a.createElement("div",null,t.status)),r.a.createElement("span",null,r.a.createElement("div",null,"u.location.country"),r.a.createElement("div",null,"u.location.city"))))})))},ce=a(116),ue=a.n(ce),me=function(e){return r.a.createElement("img",{src:ue.a,alt:"loader"})},de=function(e){Object(ae.a)(a,e);var t=Object(ne.a)(a);function a(){var e;Object(ee.a)(this,a);for(var n=arguments.length,r=new Array(n),o=0;o<n;o++)r[o]=arguments[o];return(e=t.call.apply(t,[this].concat(r))).onPageChanged=function(t){e.props.setCurrentPage(t),e.props.getUsers(t,e.props.pageSize)},e}return Object(te.a)(a,[{key:"componentDidMount",value:function(){this.props.getUsers(this.props.currentPage,this.props.pageSize)}},{key:"render",value:function(){return r.a.createElement(r.a.Fragment,null,this.props.isFetching?r.a.createElement(me,null):null,!1===this.props.isFetching?r.a.createElement(ie,{users:this.props.users,totalUsersCount:this.props.totalUsersCount,pageSize:this.props.pageSize,currentPage:this.props.currentPage,onPageChanged:this.onPageChanged,followingInProgress:this.props.followingInProgress,follow:this.props.follow,unFollow:this.props.unFollow}):"")}}]),a}(r.a.Component),pe=Object(F.b)((function(e){return{users:e.usersPage.users,pageSize:e.usersPage.pageSize,totalUsersCount:e.usersPage.totalUsersCount,currentPage:e.usersPage.currentPage,isFetching:e.usersPage.isFetching,followingInProgress:e.usersPage.followingInProgress}}),{acceptFollow:K,acceptUnFollow:Q,setCurrentPage:function(e){return{type:"SET_CURRENT_PAGE",currentPage:e}},setToggleFollowingProgress:V,getUsers:function(e,t){return function(a){a($(!0)),R(e,t).then((function(e){a($(!1)),a({type:"SET_USERS",users:e.items}),a({type:"SET_TOTAL_USER_COUNT",totalUsersCount:e.totalCount})}))}},follow:function(e){return function(t){t(V(!0,e)),B(e).then((function(a){0===a.resultCode&&t(K(e)),t(V(!1,e))}))}},unFollow:function(e){return function(t){t(V(!0,e)),H(e).then((function(a){0===a.resultCode&&t(Q(e)),t(V(!1,e))}))}}})(de),fe=function(e){Object(ae.a)(a,e);var t=Object(ne.a)(a);function a(){var e;Object(ee.a)(this,a);for(var n=arguments.length,r=new Array(n),o=0;o<n;o++)r[o]=arguments[o];return(e=t.call.apply(t,[this].concat(r))).state={editMode:!1,status:e.props.status},e.activateEditMode=function(){e.setState({editMode:!0})},e.deActivateEditMode=function(){e.setState({editMode:!1}),e.props.updateStatus(e.state.status)},e.onStatusChange=function(t){e.setState({status:t.currentTarget.value})},e}return Object(te.a)(a,[{key:"componentDidUpdate",value:function(e,t){e.status!==this.props.status&&this.setState({status:this.props.status})}},{key:"render",value:function(){return r.a.createElement("div",null,r.a.createElement("div",null,!this.state.editMode&&r.a.createElement("div",null,r.a.createElement("span",{onDoubleClick:this.activateEditMode},this.props.status||"-----"))),r.a.createElement("div",null,this.state.editMode&&r.a.createElement("div",null,r.a.createElement("input",{onChange:this.onStatusChange,autoFocus:!0,onBlur:this.deActivateEditMode,value:this.state.status}))))}}]),a}(r.a.Component),ge=function(e){var t,a,n,o,s,l,i,c;return e.profile?r.a.createElement("div",null,r.a.createElement("div",null,r.a.createElement("div",null,r.a.createElement("img",{src:e.profile.photos.large?e.profile.photos.large:le.a,alt:"\u0430\u0432\u0430\u0442\u0430\u0440 \u043f\u043e\u043b\u044c\u0437\u043e\u0432\u0430\u0442\u0435\u043b\u044f"}),r.a.createElement(fe,{status:e.status,updateStatus:e.updateStatus})),r.a.createElement("div",null,"\u041e\u0431\u043e \u043c\u043d\u0435: ",e.profile.aboutMe),r.a.createElement("div",null,r.a.createElement("h1",null,"\u041c\u043e\u0438 \u043a\u043e\u043d\u0442\u0430\u043a\u0442\u044b"),r.a.createElement("div",null,null===(t=e.profile.contacts)||void 0===t?void 0:t.facebook),r.a.createElement("div",null,null===(a=e.profile.contacts)||void 0===a?void 0:a.website),r.a.createElement("div",null,null===(n=e.profile.contacts)||void 0===n?void 0:n.vk),r.a.createElement("div",null,null===(o=e.profile.contacts)||void 0===o?void 0:o.twitter),r.a.createElement("div",null,null===(s=e.profile.contacts)||void 0===s?void 0:s.instagram),r.a.createElement("div",null,null===(l=e.profile.contacts)||void 0===l?void 0:l.youtube),r.a.createElement("div",null,null===(i=e.profile.contacts)||void 0===i?void 0:i.github),r.a.createElement("div",null,null===(c=e.profile.contacts)||void 0===c?void 0:c.mainLink)))):r.a.createElement(me,null)},Ee={posts:[{id:Object(T.a)(),message:"Hello, it's my first post lol",likesCount:777},{id:Object(T.a)(),message:"How are you?",likesCount:1327}],messageForNewPost:"",profile:null,status:""},ve=function(e){return{type:"SET_STATUS",status:e}},he=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Ee,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"ADD_POST":var a={id:Object(T.a)(),message:e.messageForNewPost,likesCount:0};return Object(y.a)(Object(y.a)({},e),{},{posts:[a].concat(Object(N.a)(e.posts))});case"CHANGE_NEW_TEXT":return Object(y.a)(Object(y.a)({},e),{},{messageForNewPost:t.newText});case"SET_USER_PROFILE":return Object(y.a)(Object(y.a)({},e),{},{profile:t.profile});case"SET_STATUS":return Object(y.a)(Object(y.a)({},e),{},{status:t.status});default:return e}},be=a(117),Oe=a.n(be),_e=a(55),je=a.n(_e),Pe=function(e){return r.a.createElement("div",{className:je.a.content},r.a.createElement("div",null,r.a.createElement("div",{className:je.a.ava},r.a.createElement("img",{src:"https://s3.amazonaws.com/liberty-uploads/wp-content/uploads/sites/1218/2015/09/avatarsucks.jpg",alt:"avatar"}),e.message,r.a.createElement("div",{className:je.a.like},r.a.createElement("img",{src:"https://banner2.cleanpng.com/20181001/rhs/kisspng-like-button-social-media-image-facebook-messenger-health-insurance-life-insurance-and-medicare-plan-5bb209e2eacd98.4287911215383945949618.jpg",alt:"avatar"}),e.likesCount))))},Se=function(e){var t=e.posts.map((function(e){return r.a.createElement(Pe,{key:e.id,id:e.id,message:e.message,likesCount:e.likesCount})}));return r.a.createElement("div",{className:Oe.a.postsBlock},r.a.createElement("div",null,r.a.createElement("div",null,"My post"),r.a.createElement("textarea",{value:e.newPostText,onChange:function(t){e.updateNewPostText(t.currentTarget.value)}}),r.a.createElement("button",{onClick:function(){e.addPost(e.newPostText),e.updateNewPostText("")}},"add post"),t))},we=Object(F.b)((function(e){return{posts:e.profilePage.posts,newPostText:e.profilePage.messageForNewPost}}),(function(e){return{addPost:function(){e({type:"ADD_POST"})},updateNewPostText:function(t){var a={type:"CHANGE_NEW_TEXT",newText:t};e(a)}}}))(Se),Ce=function(e){return r.a.createElement("div",null,r.a.createElement(ge,{profile:e.profile,status:e.status,updateStatus:e.updateStatus}),r.a.createElement(we,null))},Ne=function(e){Object(ae.a)(a,e);var t=Object(ne.a)(a);function a(){return Object(ee.a)(this,a),t.apply(this,arguments)}return Object(te.a)(a,[{key:"componentDidMount",value:function(){var e=this.props.match.params.userId;e||(e="6734"),this.props.userProfile(e),this.props.getStatusProfile(e)}},{key:"render",value:function(){return r.a.createElement("div",null,r.a.createElement(Ce,Object.assign({},this.props,{profile:this.props.profile,status:this.props.status,updateStatus:this.props.updateStatusProfile})))}}]),a}(r.a.Component),ye=Object(A.d)(Object(F.b)((function(e){return{profile:e.profilePage.profile,status:e.profilePage.status}}),{userProfile:function(e){return function(t){W(e).then((function(e){t({type:"SET_USER_PROFILE",profile:e})}))}},getStatusProfile:function(e){return function(t){z.getStatus(e).then((function(e){t(ve(e))}))}},updateStatusProfile:function(e){return function(t){z.updateStatus(e).then((function(e){0===e.resultCod&&t(ve(e))}))}}}),m.f,L)(Ne),Te=a(79),ke=a.n(Te),Ie=function(e){return r.a.createElement("header",{className:ke.a.header},r.a.createElement("img",{src:"https://s2.logaster.com/static/v3/img/products/logo.png",alt:"\u043b\u043e\u0433\u043e\u0442\u0438\u043f"}),r.a.createElement("div",{className:ke.a.loginBlock},e.isAuth?r.a.createElement("div",null,e.login," - ",r.a.createElement("button",{onClick:e.logout},"Log out")," "):r.a.createElement(c.b,{to:"/login"},"Login")))},Fe={userId:null,email:null,login:null,isAuth:!1},Ae=function(e,t,a,n){return{type:"SET_USER_DATA",payload:{userId:e,email:t,login:a,isAuth:n}}},Ue=function(){return function(e){Y().then((function(t){if(0===t.resultCode){var a=t.data,n=a.id,r=a.email,o=a.login;e(Ae(n,r,o,!0))}}))}},Me=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Fe,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"SET_USER_DATA":return Object(y.a)(Object(y.a)({},e),t.payload);default:return e}},Le=function(e){Object(ae.a)(a,e);var t=Object(ne.a)(a);function a(){return Object(ee.a)(this,a),t.apply(this,arguments)}return Object(te.a)(a,[{key:"componentDidMount",value:function(){this.props.getAuthUserData()}},{key:"render",value:function(){return r.a.createElement(Ie,this.props)}}]),a}(r.a.Component),xe={getAuthUserData:Ue,logout:function(){return function(e){q().then((function(t){0===t.data.resultCode&&e(Ae(null,null,null,!1))}))}}},Ge=Object(F.b)((function(e){return{login:e.auth.login,isAuth:e.auth.isAuth}}),xe)(Le),De=a(80),Re=a.n(De),Be=function(e){e.input;var t=e.meta,a=(e.child,Object(U.a)(e,["input","meta","child"])),n=t.touched&&t.error;return r.a.createElement("div",{className:Re.a.formControl+" "+(n?Re.a.error:"")},r.a.createElement("div",null,a.children),n&&r.a.createElement("span",null,t.error))},He=function(e){var t=e.input,a=(e.meta,e.child,Object(U.a)(e,["input","meta","child"]));return r.a.createElement(Be,e,r.a.createElement("input",Object.assign({},t,a)))},We=function(e){if(!e)return"Field is required"},ze=Object(S.a)({form:"login"})((function(e){return r.a.createElement("form",{onSubmit:e.handleSubmit},r.a.createElement("div",null,r.a.createElement(P.a,{placeholder:"Email",name:"email",component:He,validate:[We]})),r.a.createElement("div",null,r.a.createElement(P.a,{placeholder:"Password",name:"password",type:"password",validate:[We],component:He})),r.a.createElement("div",null,r.a.createElement(P.a,{type:"checkbox",name:"rememberMe",component:He})," remember me"),r.a.createElement("div",null,r.a.createElement("button",null,"Login")))})),Ye=Object(F.b)((function(e){return{isAuth:e.auth.isAuth}}),{login:function(e,t,a){return function(n){X(e,t,a).then((function(e){0===e.data.resultCode&&n(Ue())}))}}})((function(e){return e.isAuth?r.a.createElement(m.a,{to:"/profile"}):r.a.createElement("div",null,r.a.createElement("h1",null,"Login"),r.a.createElement(ze,{onSubmit:function(t){e.login(t.email,t.password,t.rememberMe)}}))}));var Xe=function(e){return r.a.createElement("div",{className:"app-wrapper"},r.a.createElement(Ge,null),r.a.createElement(u,null),r.a.createElement("div",{className:"app-wrapper-content"},r.a.createElement(m.b,{path:"/profile/:userId?",render:function(){return r.a.createElement(ye,null)}}),r.a.createElement(m.b,{path:"/dialogs",render:function(){return r.a.createElement(x,null)}}),r.a.createElement(m.b,{path:"/users",render:function(){return r.a.createElement(pe,null)}}),r.a.createElement(m.b,{path:"/news",render:function(){return r.a.createElement(p,null)}}),r.a.createElement(m.b,{path:"/music",render:function(){return r.a.createElement(f,null)}}),r.a.createElement(m.b,{path:"/setting",render:function(){return r.a.createElement(d,null)}}),r.a.createElement(m.b,{path:"/login",render:function(){return r.a.createElement(Ye,null)}})))},qe=a(118),Je=a(251),Ke=Object(A.c)({profilePage:he,dialogsPage:I,usersPage:Z,auth:Me,form:Je.a}),Qe=Object(A.e)(Ke,Object(A.a)(qe.a));s.a.render(r.a.createElement(c.a,null,r.a.createElement(F.a,{store:Qe},r.a.createElement(Xe,null))),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()})).catch((function(e){console.error(e.message)}))},52:function(e,t,a){e.exports=a.p+"static/media/user.7cc7a630.png"},53:function(e,t,a){e.exports={dialogs:"Dialogs_dialogs__2IEOm",dialogsItems:"Dialogs_dialogsItems__jGSX3",messages:"Dialogs_messages__3oOx8"}},55:function(e,t,a){e.exports={ava:"Post_ava__2agg8",like:"Post_like__2Oocl"}},74:function(e,t,a){e.exports={dialog:"DialogItem_dialog__2nQda",active:"DialogItem_active__3nl2G"}},78:function(e,t,a){e.exports={userPhoto:"users_userPhoto__3jiaO",selectedPage:"users_selectedPage__3qTNP"}},79:function(e,t,a){e.exports={header:"Header_header__3Ipvi",loginBlock:"Header_loginBlock__2yB1v"}},80:function(e,t,a){e.exports={formControl:"FormsControls_formControl__2NSsY",error:"FormsControls_error__bJs-R"}}},[[120,1,2]]]);
//# sourceMappingURL=main.bd7851f1.chunk.js.map